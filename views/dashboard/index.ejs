<% include ../partials/header %>

    <div id= dashboard-container class="container-fluid">  
        <div id="dash-left-pane" class="col-md-2">
            <div class="row">
                    <!--<span class="glyphicon glyphicon-user"></span>-->
                    <span id="dash-img-span"> 
                        <% if(user.hasImg) { %>
                                <img id='dash-prof-pic' src="<%= userImg %>" onerror='imgError(this);'>
                        <% } else { %>
                                <img id='dash-prof-pic' src="../img/blank_user.jpg" onerror='imgError(this);'>
                        <% } %>
                    </span>
            </div>
            <div id="dash-name" class="row">
                <strong><%= user.name %></strong>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div id="date-input-row" class="row">
                        <div id="date-filter" class="form-group fg_input_head">
                            <label for="date-filter">Choose Date Range:</label>
                            <div class="col-md-6">
                                <div class="from-to-date-div">
                                    <label for="date-filter">From:</label>
                                    <span><input id="date-from" class="date-filter form-control" data-toggle="datepicker"></span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="from-to-date-div">
                                    <label for="date-filter">To:</label>
                                    <span><input id="date-to" class="date-filter form-control" data-toggle="datepicker"></span>
                                </div>
                            </div>  
                        </div>
                    </div>
                    <div id="num-holes-dropdown-div" class="form-group fg_input_head">
                        <label for="num_holes_dropdown">Number of Holes:</label>
                        <select class="form-control" id="num-holes-dropdown">
                            <% roundTypes.forEach(function(type){
                                if(type.found){ %>
                                    <option value="<%= type.numHoles %>"><%= type.numHoles %></option>
                             <% }     
                            }); %>
                        </select>
                    </div>
                    <div id="tee-club-dropdown-div" class="form-group fg_input_head hidden">
                        <label for="tee_club_dropdown">Choose Club:</label>
                        <select class="form-control" id="tee-club-dropdown">
                        </select>
                    </div>
                    <div id="approach-club-dropdown-div" class="form-group fg_input_head hidden">
                        <label for="approach_club_dropdown">Choose Club:</label>
                        <select class="form-control" id="approach-club-dropdown">
                        </select>
                    </div>
                    <!--<nav id="dash-left-menu">-->
                    <!--  <UL>-->
                    <!--   <li class="var_nav">-->
                    <!--      <div class="link_bg"></div>-->
                    <!--      <div class="link_title">-->
                    <!--        <div class=icon> -->
                    <!--        <i class="fas fa-plus"></i>-->
                    <!--        </div>-->
                    <!--        <a href="/rounds/new"><span>New Round</span></a>-->
                    <!--      </div>-->
                    <!--   </li>-->
                    <!--   <li class="var_nav">-->
                    <!--      <div class="link_bg"></div>-->
                    <!--      <div class="link_title">-->
                    <!--        <div class=icon> -->
                    <!--        <i class="fas fa-eye"></i>-->
                    <!--        </div>-->
                    <!--        <a href="/rounds"><span>View Rounds</span></a>-->
                    <!--      </div>-->
                    <!--   </li>-->
                    <!--  </UL>-->
                    <!--</nav>-->
                </div>
            </div>
        </div>
        <div id="dashboard-viz" class="col-md-10">
            <div class="row">
                <div class="col-md-12">
                    <div id="dash-tab-menu">
                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                          <li id="summary-tab-li" class="nav-item active">
                            <a class="nav-link active non-driving-tab non-approach-tab" id="summary-tab" data-toggle="tab" href="#summary" role="tab" aria-controls="summary" aria-selected="true">Summary</a>
                          </li>
                          <li id="driving-tab-li" class="nav-item">
                            <a class="nav-link non-home-tab non-approach-tab" id="driving-tab" data-toggle="tab" href="#driving" role="tab" aria-controls="driving" aria-selected="false">Driving</a>
                          </li>
                          <li id="approach-tab-li" class="nav-item">
                            <a class="nav-link non-home-tab non-driving-tab" id="approach-tab" data-toggle="tab" href="#approach" role="tab" aria-controls="approach" aria-selected="false">Approach</a>
                          </li>
                          <li id="short-game-tab-li" class="nav-item">
                            <a class="nav-link non-home-tab non-driving-tab non-approach-tab" id="short-game-tab" data-toggle="tab" href="#short-game" role="tab" aria-controls="short-game" aria-selected="false">Short Game</a>
                          </li>
                          <li id="weather-tab-li" class="nav-item">
                            <a class="nav-link non-home-tab non-driving-tab non-approach-tab" id="weather-tab" data-toggle="tab" href="#weather" role="tab" aria-controls="weather-game" aria-selected="false">Weather</a>
                          </li>
                        </ul>
                    </div>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade in show active" id="summary" role="tabpanel" aria-labelledby="summary-tab">
                            <div class="row">
                                <div class="col-md-2">
                                    <div class="counter">
                                        <h2 id="handicap" class="timer count-title count-number" data-to="" data-speed="1500"></h2>
                                        <p id="handicap-label" class="count-text ">Handicap</p>
                                    </div>  
                                </div>
                                <div class="col-md-2">
                                    <div class="counter">
                                        <h2 id="scoring-avg" class="timer count-title count-number" data-to="" data-speed="1500"></h2>
                                        <p class="count-text ">Scoring Average</p>
                                    </div>  
                                </div>
                                <div class="col-md-2">
                                    <div class="counter">
                                        <h2 id ="avg-score-to-par" class="timer count-title count-number-sign" data-to="" data-speed="1500"></h2>
                                        <p class="count-text ">Average Score to Par</p>
                                    </div>
                                </div>
                                <div id="left-avg-col" class="col-md-2">
                                    <div class="counter">
                                        <h2 id="par-three-scoring-avg" class="timer count-title count-number" data-to="" data-speed="1500"></h2>
                                        <p class="count-text ">Par 3 Scoring Avg</p>
                                    </div>
                                </div>   
                                <div id="middle-avg-col" class="col-md-2">
                                    <div class="counter">
                                        <h2 id="par-four-scoring-avg" class="timer count-title count-number" data-to="" data-speed="1500"></h2>
                                        <p class="count-text ">Par 4 Scoring Avg</p>
                                    </div>
                                </div> 
                                <div id="right-avg-col" class="col-md-2">
                                    <div class="counter">
                                        <h2 id="par-five-scoring-avg" class="timer count-title count-number" data-to="" data-speed="1500"></h2>
                                        <p class="count-text ">Par 5 Scoring Avg</p>
                                    </div>
                                </div> 
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div id="rbd-line" class="dash-highchart"></div>
                                </div>
                                <div class="col-md-6">
                                    <div id="score-name-pie" class="dash-highchart">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="driving" role="tabpanel" aria-labelledby="driving-tab">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row top-dashboard-stats">
                                        <div class="col-md-6">
                                            <div class="counter">
                                                <span id="fir-ratio" class="dashboard-ratio">
                                                </span>
                                                <div>
                                                    <h2 id="fir-percent" class="timer count-title count-number-percent with-ratio" data-to="" data-speed="1500"></h2>
                                                    <p class="count-text ">FIR %</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="counter">
                                                <h2 id="driving-distance" class="timer count-title count-number" data-to="" data-speed="1500"></h2>
                                                <p class="count-text ">Average Tee Shot Distance</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div id="fir-per-round-line"></div>
                                        </div>
                                    </div>
                                </div>    
                                <div class="col-md-6">
                                        <h4 id="drive-tracker-title">Drive Tracker <span id="drive-tracker-date"></span></h4>
                                                <div id='canv-container'>
                                                    <canvas id="driveTracker" width="500" height="500"></canvas>
                                                </div>
                                                <div id='drive-tracker-legend'>
                                                    <h5>Legend</h5>
                                                    <div id='legend-values'>
                                                        <div>
                                                            <span id="par-circle"> </span><span class="legend-score-name"> par </span>
                                                        </div>
                                                    </div>
                                                    <button id="reset-drive-tracker" class="btn btn-info">Play Again</button>
                                                </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="counter">
                                        <span id="tee-miss-left-ratio" class="dashboard-ratio">
                                        </span>
                                        <div>
                                            <h2 id="tee-miss-left" class="timer count-title count-number with-ratio" data-to="" data-speed="1500"></h2>
                                            <p class="count-text ">Miss Left %</p>
                                        </div>
                                    </div>  
                                </div>
                                <div class="col-md-3">
                                    <div class="counter">
                                        <span id="tee-miss-right-ratio" class="dashboard-ratio">
                                        </span>
                                        <div>
                                            <h2 id="tee-miss-right" class="timer count-title count-number with-ratio" data-to="" data-speed="1500"></h2>
                                            <p class="count-text ">Miss Right %</p>
                                        </div>
                                    </div>  
                                </div>
                                <div class="col-md-3">
                                    <div class="counter">
                                        <span id="tee-miss-long-ratio" class="dashboard-ratio">
                                        </span>
                                        <div>
                                            <h2 id="tee-miss-long" class="timer count-title count-number with-ratio" data-to="" data-speed="1500"></h2>
                                            <p class="count-text ">Miss Short %</p>
                                        </div>
                                    </div>  
                                </div>
                                <div class="col-md-3">
                                    <div class="counter">
                                        <span id="tee-miss-short-ratio" class="dashboard-ratio">
                                        </span>
                                        <div>
                                            <h2 id="tee-miss-short" class="timer count-title count-number with-ratio" data-to="" data-speed="1500"></h2>
                                            <p class="count-text ">Miss Long %</p>
                                        </div>
                                    </div>  
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="approach" role="tabpanel" aria-labelledby="approach-tab">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="row top-dashboard-stats">
                                        <div class="col-md-6">
                                            <div class="counter">
                                                <span id="gir-ratio" class="dashboard-ratio">
                                                </span>
                                                <div>
                                                    <h2 id="gir-percent" class="timer count-title count-number-percent with-ratio" data-to="" data-speed="1500"></h2>
                                                    <p class="count-text ">GIR %</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="counter">
                                                <h2 id="approach-distance" class="timer count-title count-number" data-to="" data-speed="1500"></h2>
                                                <p class="count-text ">Average Approach Distance</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div id="approach-spray-area"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row top-dashboard-stats">
                                        <div id="approach-miss-table-div" class="counter">
                                            <div id="miss-spread-title">
                                                Miss Trap Spread
                                            </div>
                                            <table id='approach-miss-table' class="table table-bordered">
                                              <tbody>
                                                <tr>
                                                    <td id="approach-fringe-td">
                                                        <div class="approach-miss-label">
                                                            <div class="approach-miss-num" id="approach-miss-fringe">
                                                            </div>
                                                            <div>
                                                                Fringe
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td id="approach-rough-td">
                                                        <div class="approach-miss-label">
                                                            <div class="approach-miss-num" id="approach-miss-rough">
                                                            </div>
                                                            <div>
                                                                Rough
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td id="approach-bunker-td">
                                                        <div class="approach-miss-label">
                                                            <div class="approach-miss-num" id="approach-miss-bunker">
                                                            </div>
                                                            <div>
                                                                Bunker
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td id="approach-fescue-td">
                                                        <div class="approach-miss-label">
                                                            <div class="approach-miss-num" id="approach-miss-fescue">
                                                            </div>
                                                            <div>
                                                                Fescue
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td id="approach-woods-td">
                                                        <div class="approach-miss-label">
                                                            <div class="approach-miss-num" id="approach-miss-woods">
                                                            </div>
                                                            <div>
                                                                Woods
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td id="approach-water-td">
                                                        <div class="approach-miss-label">
                                                            <div class="approach-miss-num" id="approach-miss-water">
                                                            </div>
                                                            <div>
                                                                Water
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                              </tbody>
                                            </table>
                                            <div id="miss-spread-footnote">
                                                *Not all misses included
                                            </div>
                                        </div>
                                    </div>
                                </div>    
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="counter">
                                        <span id="approach-miss-left-ratio" class="dashboard-ratio">
                                        </span>
                                        <div>
                                            <h2 id="approach-miss-left" class="timer count-title count-number with-ratio" data-to="" data-speed="1500"></h2>
                                            <p class="count-text ">Miss Left %</p>
                                        </div>
                                    </div>  
                                </div>
                                <div class="col-md-3">
                                    <div class="counter">
                                        <span id="approach-miss-right-ratio" class="dashboard-ratio">
                                        </span>
                                        <div>
                                            <h2 id="approach-miss-right" class="timer count-title count-number with-ratio" data-to="" data-speed="1500"></h2>
                                            <p class="count-text ">Miss Right %</p>
                                        </div>
                                    </div>  
                                </div>
                                <div class="col-md-3">
                                    <div class="counter">
                                        <span id="approach-miss-long-ratio" class="dashboard-ratio">
                                        </span>
                                        <div>
                                            <h2 id="approach-miss-long" class="timer count-title count-number with-ratio" data-to="" data-speed="1500"></h2>
                                            <p class="count-text ">Miss Short %</p>
                                        </div>
                                    </div>  
                                </div>
                                <div class="col-md-3">
                                    <div class="counter">
                                        <span id="approach-miss-short-ratio" class="dashboard-ratio">
                                        </span>
                                        <div>
                                            <h2 id="approach-miss-short" class="timer count-title count-number with-ratio" data-to="" data-speed="1500"></h2>
                                            <p class="count-text ">Miss Long %</p>
                                        </div>
                                    </div>  
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="short-game" role="tabpanel" aria-labelledby="short-game-tab">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="counter">
                                        <h2 id="num-scramble-attempts" class="timer count-title count-number" data-to="" data-speed="1500"></h2>
                                        <p class="count-text "># Scramble Attempts</p>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="counter">
                                        <span id="scramble-ratio" class="dashboard-ratio">
                                        </span>
                                        <div>
                                            <h2 id="scramble-percent" class="timer count-title count-number-percent with-ratio" data-to="" data-speed="1500"></h2>
                                            <p class="count-text ">Scramble %</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="counter">
                                        <span id="sand-save-ratio" class="dashboard-ratio">
                                        </span>
                                        <div>
                                            <h2 id="sand-save-percent" class="timer count-title count-number-percent with-ratio" data-to="" data-speed="1500"></h2>
                                            <p class="count-text ">Sand Save %</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="counter">
                                        <h2 id="putts-per-round" class="timer count-title count-number" data-to="" data-speed="1500"></h2>
                                        <p class="count-text ">Putts Per Round</p>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                        <div id="trap-score-pie"></div>
                                </div>
                                <div class="col-md-6">
                                    <div id="scrambling-by-trap"></div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="weather" role="tabpanel" aria-labelledby="weather-tab">
                            <div class="row">
                                <div class="col-md-12">
                                    weather
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/series-label.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="../scripts/dashboard/themes/dark-unica.js"></script>
<script src="https://code.createjs.com/easeljs-0.8.1.min.js"></script>  
<script src="https://code.createjs.com/tweenjs-0.6.1.min.js"></script>
<script src="../scripts/dashboard/summary/setSummary.js"></script>
<script src="../scripts/dashboard/summary/highChartsScoreByDate.js"></script>
<script src="../scripts/dashboard/summary/highChartsScoreByName.js"></script>
<script src="../scripts/dashboard/shortgame/setShortGame.js"></script>
<script src="../scripts/dashboard/shortgame/highChartsScoreByTrap.js"></script>
<script src="../scripts/dashboard/shortgame/highChartsScramblingByTrap.js"></script>
<script src="../scripts/dashboard/driving/setDriving.js"></script>
<script src="../scripts/dashboard/driving/driveTracker.js"></script>
<script src="../scripts/dashboard/driving/highChartsFirByRound.js"></script>
<script src="../scripts/dashboard/approach/setApproach.js"></script>
<script src="../scripts/dashboard/approach/highChartsApproachSpread.js"></script>
<script src="../scripts/dashboard/updateDashboard.js"></script>

<script>

    var activeTab = 'summary';
    //numCounterUpdate();
    $(function() {
        var currentDate = new Date();
        
        $('#date-from').datepicker(
            {
                date: new Date(currentDate.getFullYear(), 1, 1),
                format: 'm/d/yyyy'
            });
        $('#date-from').val('1/1/' + currentDate.getFullYear());
        $('#date-to').datepicker(
            {
                date: new Date(),
                format: 'm/d/yyyy'
            });
        $('#date-to').val(currentDate.getMonth() + 1 + '/' + currentDate.getDate() + '/' + currentDate.getFullYear());
        updateDashboard();
        
        var fromDate = $('#date-from').datepicker('getDate');
    });
    
    //Toggle filters
    $('#driving-tab').on('click', function(){
        activeTab = 'driving';
        $('#tee-club-dropdown-div').removeClass("hidden");
        updateTeeClubFilter();
        updateDashboard('All');
    });
    $('.non-driving-tab').on('click', function(){
        $('#tee-club-dropdown-div').addClass("hidden");
    });
    $('#approach-tab').on('click', function(){
        activeTab = 'approach';
        $('#approach-club-dropdown-div').removeClass("hidden");
        updateApproachClubFilter();
        updateDashboard('All');
    });
    $('#short-game-tab').on('click', function(){
        activeTab = 'shortgame';
        updateDashboard();
    });
    $('#summary-tab').on('click', function(){
        activeTab = 'summary';
        updateDashboard();
    });
    $('#weather-tab').on('click', function(){
        activeTab = 'weather';
        updateDashboard();
    });
    $('.non-approach-tab').on('click', function(){
        $('#approach-club-dropdown-div').addClass("hidden");
    });
    
    //Tab Menu Code
    $('.non-home-tab').click(function() {
        $("#summary").removeClass("show");
    });
    
    $('.date-filter').change(function(){
        updateDashboard();
    });

    $(function() {
        $('#tee-club-dropdown').change(function(){
           updateDashboard();
        });
        $('#approach-club-dropdown').change(function(){
            updateDashboard();
        });
        $('#num-holes-dropdown').change(function(){
             updateDashboard();
        });
    });
    
    $('#reset-drive-tracker').click(function() {
        var numHoles = $("#num-holes-dropdown :selected").text(),
            club = $("#tee-club-dropdown :selected").text(),
            isFull = true;
        if (numHoles === "9 Holes") {
            isFull = false;
        }
        var parameters = {isFull: isFull};
        driveTracker(parameters, club);
    });

    String.prototype.initCap = function () {
        return this.toLowerCase().replace(/(?:^|\s)[a-z]/g, function (m) {
            return m.toUpperCase();
        });
    };
    
    
    //Handicap Calculator
    $.get( '/dashboard/handicapdata', function(data) {
        if(!data.handicapIndex){
            $('#handicap').html("N/A");
            $('#handicap-label').html("5+ Rounds for Handicap");
        } else {
            $('#handicap').html(data.handicapIndex);
            $('#handicap').attr("data-to",data.handicapIndex);
        }
    });
    
    function numCounterUpdate(){
        (function ($) {
        	$.fn.countTo = function (options) {
        		options = options || {};
        		
        		return $(this).each(function () {
        			// set options for current element
        			var settings = $.extend({}, $.fn.countTo.defaults, {
        				from:            $(this).data('from'),
        				to:              $(this).data('to'),
        				speed:           75,
        				refreshInterval: $(this).data('refresh-interval'),
        				decimals:        $(this).data('decimals')
        			}, options);
        			
        			// how many times to update the value, and how much to increment the value on each update
        			var loops = Math.ceil(settings.speed / settings.refreshInterval),
        				increment = (settings.to - settings.from) / loops;
        			
        			// references & variables that will change with each update
        			var self = this,
        				$self = $(this),
        				loopCount = 0,
        				value = settings.from,
        				data = $self.data('countTo') || {};
        			
        			$self.data('countTo', data);
        			
        			// if an existing interval can be found, clear it first
        			if (data.interval) {
        				clearInterval(data.interval);
        			}
        			data.interval = setInterval(updateTimer, settings.refreshInterval);
        			
        			// initialize the element with the starting value
        			render(value);
        			
        			function updateTimer() {
        				value += increment;
        				loopCount++;
        				
        				render(value);
        				
        				if (typeof(settings.onUpdate) == 'function') {
        					settings.onUpdate.call(self, value);
        				}
        				
        				if (loopCount >= loops) {
        					// remove the interval
        					$self.removeData('countTo');
        					clearInterval(data.interval);
        					value = settings.to;
        					
        					if (typeof(settings.onComplete) == 'function') {
        						settings.onComplete.call(self, value);
        					}
        				}
        			}
        			
        			function render(value) {
        				var formattedValue = settings.formatter.call(self, value, settings);
        				$self.html(formattedValue);
        			}
        		});
        	};
        	
        	$.fn.countTo.defaults = {
        		from: 0,               // the number the element should start at
        		to: 0,                 // the number the element should end at
        		speed: 1000,           // how long it should take to count between the target numbers
        		refreshInterval: 100,  // how often the element should be updated
        		decimals: 1,           // the number of decimal places to show
        		formatter: formatter,  // handler for formatting the value before rendering
        		onUpdate: null,        // callback method for every time the element is updated
        		onComplete: null       // callback method for when the element finishes updating
        	};
        	
        	function formatter(value, settings) {
        		return value.toFixed(settings.decimals);
        	}
        }(jQuery));
        
        jQuery(function ($) {
          // custom formatting example
          var sign = "";
          if($('.count-number-sign').data().to > 0){
              sign = "+";
          }
          
          $('.count-number-sign').data('countToOptions', {
        	  formatter: function (value, options) {
        	  return sign + value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
        	}
          });
          
          $('.count-number-percent').data('countToOptions', {
              formatter: function (value, options) {
        	  return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',') + " %";
        	}
          });
            $('.count-number').data('countToOptions', {
              formatter: function (value, options) {
              return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
            }
            });

          // start all the timers
          $('.timer').each(count);  
          
          function count(options) {
        	var $this = $(this);
        	options = $.extend({}, options || {}, $this.data('countToOptions') || {});
        	$this.countTo(options);
          }
        });
    }
    
    function setWeather(parameters) {
        $.get( '/dashboard/roundsdata', parameters, function(data) {
            data.rounds.forEach(function(round){
                console.log(round);
            });
            //Protect against divide by zero
            // if(totalScrambleAttempts === 0){
            //     $("#scramble-percent").html("N/A");
            //     $("#scramble-ratio").html("");
            // } else {
            //     $("#scramble-percent").html(Math.round(scramblePercent * 10) / 10 + "%");
            //     $("#scramble-percent").attr("data-to",Math.round(scramblePercent * 10) / 10 + "%");
            //     $("#scramble-ratio").html(totalScrambles + "/" + totalScrambleAttempts);
            // }
            // if(totalSandSaveAttempts === 0){
            //     $("#sand-save-percent").html("N/A");
            //     $("#sand-save-ratio").html("");
            // } else {
            //     $("#sand-save-percent").html(Math.round(sandSavePercent * 10) / 10 + "%");
            //     $("#sand-save-percent").attr("data-to",Math.round(sandSavePercent * 10) / 10 + "%");
            //     $("#sand-save-ratio").html(totalSandSaves + "/" + totalSandSaveAttempts);
            // }
            // //Set approach data
            // $("#num-scramble-attempts").html(Math.round(totalScrambleAttempts * 10) / 10);
            // $("#num-scramble-attempts").attr("data-to",Math.round(totalScrambleAttempts * 10) / 10);
            // $("#putts-per-round").html(Math.round(scramblePercent * 10) / 10);
            // $("#putts-per-round").attr("data-to",Math.round(scramblePercent * 10) / 10);
            
            // //Pie Chart
            // highChartsScoreByTrap(traps);
            
            // //Scrambling % by trap bar chart
            // highChartsScramblingByTrap(traps);
            
            // //numCounterUpdate();
        });
    };
    
</script>
<% include ../partials/footer %>